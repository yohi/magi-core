# Requirements Document

## Introduction
ユーザーがCLIで認証を行う際のUXを改善します。具体的には、ブラウザ認証後の成功画面をより分かりやすくし、CLIへの自動連携が失敗した場合でもスムーズに手動で認証コードをコピーできるフローを提供します。

## Requirements

### Requirement 1: リッチな認証成功画面の表示
**Objective:** CLIユーザーとして、認証後にブラウザで分かりやすい成功画面を見たい。また、自動連携に失敗した際に備えて認証コードを簡単にコピーできるようにしたい。

#### Acceptance Criteria
1. ブラウザ認証後、ローカルサーバーのリダイレクト先で「認証成功」を明確に示すHTMLページを表示すること。
2. ページ内に「このウィンドウを閉じて、ターミナルに戻ってください」という旨のメッセージを表示すること。
3. CLIが自動的に認証コードを受け取れなかった場合のフォールバックとして、認証コードを大きく表示すること。
4. 認証コードの横に「コピー」ボタンを配置し、ワンクリックでクリップボードにコピーできるJavaScriptを実装すること。
5. エラー発生時には、エラー内容を分かりやすく表示すること。

### Requirement 2: CLI側の待機ロジックの改善と手動入力サポート
**Objective:** CLIユーザーとして、ブラウザ認証完了後、自動的に認証が進むことを期待するが、もし失敗しても手動でコードを貼り付けて認証を完了できるようにしたい。

#### Acceptance Criteria
1. CLIはローカルサーバーからの認証コード受信（自動）と、ユーザーによる標準入力（手動）の両方を待機すること。
2. 自動でコードを受信した場合は、即座に認証フローを完了し、手動入力待ちをキャンセルすること。
3. ユーザーが手動でコード（またはリダイレクトURL全体）を入力した場合、適切にパースして認証フローを完了すること。
4. 待機中は「認証待機中... (自動で反応しない場合はコードを貼り付けてください)」といった明確なメッセージを表示すること。
5. タイムアウト時やエラー時には適切なメッセージを表示して終了すること。
